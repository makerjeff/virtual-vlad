function init_speech_synth_voice(){speechSynthesis.onvoiceschanged=function(){(voices=speechSynthesis.getVoices()).forEach(function(e,t,n){"Google UK English Male"===e.voiceURI&&(voice_to_use=e)})}}function utter_me(e){var t=new SpeechSynthesisUtterance(e);console.log('Saying: "'+e+'"'),t.voice=voice_to_use,t.volume=1,t.rate=1,speechSynthesis.speak(t)}function get_random_greeting(){return greeting_db[Math.floor(Math.random()*greeting_db.length)]+" "+query_db[Math.floor(Math.random()*query_db.length)]}function submit_input(e){$.ajax({method:"POST",url:"/api/get_stems",data:{stringy:e},success:function(e,t,n){console.log(e),result_div.innerHTML="",e.payload.data.forEach(function(e,t,n){var i=document.createElement("h4");i.classList.add("question_item","animate_fade_in"),i.innerHTML=e,result_div.appendChild(i)})},error:function(e,t,n){console.log(n)}})}function filtrator_old(e,t){var n=[],i=new RegExp("^"+e.toLowerCase(),"g");return t.forEach(function(e,t,a){-1!==e.search(new RegExp(i,"g"))&&n.push(e)}),n}var d=document,search_container=d.getElementById("search_container"),title=d.getElementById("title"),input_form=d.getElementById("input_form"),input_field=d.getElementById("input_field"),result_div=d.getElementById("result_container"),voices,voice_to_use,greeting_db=["Welcome to Virtual Vlad.","Hello there.","Hi.","Hello human.","Greetings.","Greetings human."],query_db=["What seems to be the problem?","How can I help you today?","Please state the nature of your technical emergency.","How may I be of assistance?"];title.addEventListener("click",function(e){utter_me(get_random_greeting())}),input_form.addEventListener("submit",function(e){e.preventDefault(),utter_me(textSanitizer.getSanitizedString(input_field.value)),VirtualVlad.submit_input(input_field.value),input_field.value=""}),window.addEventListener("load",function(e){init_speech_synth_voice(),VirtualVlad.get_questions(),window.setTimeout(function(){utter_me(get_random_greeting())},500)});var Timer={last_time:Date.now(),num_in_seconds:0,timer:function(){requestAnimationFrame(Timer.timer);var e=Date.now();e-Timer.last_time>=1e3&&(console.log("Time elapsed: "+Timer.num_in_seconds+" seconds."),Timer.last_time=e,Timer.num_in_seconds++)}},VirtualVlad={questions:[],submit_input:function(e){$.ajax({method:"POST",url:"/api/get_stems",data:{stringy:e},success:function(e,t,n){console.log(e),result_div.innerHTML="",VirtualVlad.populate_results(e)},error:function(e,t,n){console.log(n)}})},get_questions:function(){$.ajax({method:"GET",url:"/api/get_questions",success:function(e,t,n){VirtualVlad.questions=e.payload.data,console.log("Successfully loaded VirtualVlad.questions with data from server. ")},error:function(e,t,n){}})},populate_results:function(e){VirtualVlad.draw_results_header(e),e.payload.data.forEach(function(e,t,n){var i=document.createElement("h4");i.classList.add("question_item","animate_fade_in"),i.innerHTML=e,result_div.appendChild(i)})},draw_results_header:function(e){var t=document.createElement("p");t.classList.add("animate_fade_in"),t.innerHTML='Your search for <b>"'+e.payload.search_string+'"</b> yielded <b>'+e.payload.data.length+"</b> results.",result_div.appendChild(t)}};