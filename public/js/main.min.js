function init_speech_synth_voice(){speechSynthesis.onvoiceschanged=function(){(voices=speechSynthesis.t()).forEach(function(e,t,n){"Google UK English Male"===e.i&&(voice_to_use=e)})}}function utter_me(e){var t=new SpeechSynthesisUtterance(e);console.log('Saying: "'+e+'"'),t.voice=voice_to_use,t.volume=1,t.rate=1,speechSynthesis.o(t)}function get_random_greeting(){return greeting_db[Math.floor(Math.random()*greeting_db.length)]+" "+query_db[Math.floor(Math.random()*query_db.length)]}function submit_input(e){$.s({method:"POST",url:"/api/get_stems",data:{u:e},l:function(e,t,n){console.log(e),result_div.innerHTML="",e._.data.forEach(function(e,t,n){var i=document.createElement("h4");i.classList.add("question_item","animate_fade_in"),i.innerHTML=e,result_div.appendChild(i)})},error:function(e,t,n){console.log(n)}})}function filtrator_old(e,t){var n=[],i=new RegExp("^"+e.toLowerCase(),"g");return t.forEach(function(e,t,a){-1!==e.search(new RegExp(i,"g"))&&n.push(e)}),n}var d=document,search_container=d.getElementById("search_container"),title=d.getElementById("title"),input_form=d.getElementById("input_form"),input_field=d.getElementById("input_field"),result_div=d.getElementById("result_container"),voices,voice_to_use,greeting_db=["Welcome to Virtual Vlad.","Hello there.","Hi.","Hello human.","Greetings.","Greetings human."],query_db=["What seems to be the problem?","How can I help you today?","Please state the nature of your technical emergency.","How may I be of assistance?"];title.addEventListener("click",function(e){utter_me(get_random_greeting())}),input_form.addEventListener("submit",function(e){e.preventDefault(),utter_me(textSanitizer.m(input_field.value)),VirtualVlad.g(input_field.value),input_field.value=""}),window.addEventListener("load",function(e){init_speech_synth_voice(),VirtualVlad.h(),window.setTimeout(function(){utter_me(get_random_greeting())},500)});var Timer={p:Date.now(),v:0,V:function(){requestAnimationFrame(Timer.V);var e=Date.now();e-Timer.p>=1e3&&(console.log("Time elapsed: "+Timer.v+" seconds."),Timer.p=e,Timer.v++)}},VirtualVlad={T:[],g:function(e){$.s({method:"POST",url:"/api/get_stems",data:{u:e},l:function(e,t,n){console.log(e),result_div.innerHTML="",VirtualVlad.q(e)},error:function(e,t,n){console.log(n)}})},h:function(){$.s({method:"GET",url:"/api/get_questions",l:function(e,t,n){VirtualVlad.T=e._.data,console.log("Successfully loaded VirtualVlad.questions with data from server. ")},error:function(e,t,n){}})},q:function(e){VirtualVlad.L(e),e._.data.forEach(function(e,t,n){var i=document.createElement("h4");i.classList.add("question_item","animate_fade_in"),i.innerHTML=e,result_div.appendChild(i)})},L:function(e){var t=document.createElement("p");t.classList.add("animate_fade_in"),t.innerHTML='Your search for <b>"'+e._.S+'"</b> yielded <b>'+e._.data.length+"</b> results.",result_div.appendChild(t)}};